
并发(Concurrency)与并行(Parallelism)
===============================
屈春河
--------

+顾名思义，并发是同时发生，并行就是同时执行。在中文中，并发的字面意思指的是线程同时开始执行这个事件，也就是说后续的执行是串行，还是并行，不确定，依赖于底层的硬件条件和操作系统的调度，而并行则指的是线程同时执行这个过程。

在英文中，con意为“一起,”(with, together)，而cur表示“跑”(run)的意思，因此两者合起来Concurrency就是同时开始跑，即同时发生的意思。在parallelism可以拆分为par+all（=other)，其中par意为并列或者肩并肩(side by side），合起来表示相互不同的多个东西并列存在。

无论是中文，还是英文，从字面意思而言，并发表示线程同时开始，代表的是事件，而并行表示线程同时执行，代表的是过程或者活动。

在单核和单CPU时代，并发和并行就是字面意思。

并发指的是在单处理器系统上线程在微观串行执行，而在宏观并发执行，即
* 处理器分时复用
* 多线程交织执行
在特定某个时刻，某一个线程以排他方式独占CPU资源，而在不同时刻，不同的线程占用CPU运行，从而实现在一段时间内同时执行多个线程的表象。

并行指的是在装配多个处理器的并行计算机系统上，将多个线程分配或者指定到不同的处理器上同时执行。

当前早已经进入多CPU(SMP)和多核时代，主流的商用服务器装配多个CPU，即使装配单个CPU，其CPU也拥有多个内核。这使得严格意义的传统并发情况已经不复存在了。面对具有多CPU和多核的计算机体系结构，从上层传软件角度，并发和并行甚至没有本质的区别，都需要挖掘问题或者任务本事固有的并行能力。因此，可以认为并发是一种特殊的并行，或者并行是一种特殊的并发。


当前很多场合之所以还会区分并发和并行，是因为如下几个方面的原因
* 硬件不同：并行更依赖于硬件支撑，需要更多的处理单元（包括CPU和GPU）和专门的通信硬件
* 问题不同：并行往往针对更大规模的数据或/和更复杂的计算，而并发往往针对更大规模的输入数据或者更多数量的服务请求。
* 软件不同：并行需要更加复杂的并行化软件支持和专门的并行算法，运行时需要创建大量的线程
* 目标不同，并行往往以减小处理时间为目标，而并发可能以增加系统吞吐、减小处理时延和实现资源复用为目标。

总而言之，当谈论并行时，往往指的是面向复杂的计算和处理任务，依赖于专门系统工具，运行在在专门的服务器上，以更快地解决任务为目标。
当谈论并发时，往往指的是在普通台式机或者商用服务器上，使用并发的原因也更加多样，包括[1]
* 实现相互隔离和提高响应能力，即能够快速响应服务请求，避免或减小服务的相互干扰或者阻塞。
* 实现可扩展性和提高系统吞吐，即能够服务更多的服务请求和处理更大规模的数据。
* 实现资源共享和确保数据一致性。

# 参考
[1] Herb Sutter,The Pillars of Concurrency,https://www.drdobbs.com/parallel/the-pillars-of-concurrency/200001985



